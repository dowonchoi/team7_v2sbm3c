<!DOCTYPE html>
<html layout:decorate="~{layout}">
<th:block layout:fragment="head">
  <style>
    /* ✅ 등록 버튼 (연한 녹색) */
    .content_body_bottom .btn.btn-primary {
      background-color: #6db75b !important; /* 연한 녹색 */
      color: #fff !important;
      border: none !important;
      padding: 6px 14px !important;
      font-size: 14px !important;
      border-radius: 6px !important;
      transition: all 0.2s ease-in-out;
    }

    .content_body_bottom .btn.btn-primary:hover {
      background-color: #20b564 !important; /* hover 시 진한 녹색 */
      transform: scale(1.05) !important;
    }

    /* ✅ 캘린더/목록 버튼 (연한 회색) */
    .content_body_bottom .btn.btn-secondary {
      background-color: #e0e0e0 !important; /* 연한 회색 */
      color: #333 !important;
      border: none !important;
      padding: 6px 14px !important;
      font-size: 14px !important;
      border-radius: 6px !important;
      transition: all 0.2s ease-in-out;
    }

    .content_body_bottom .btn.btn-secondary:hover {
      background-color: #cfcfcf !important; /* hover 시 진한 회색 */
      transform: scale(1.05) !important;
    }
  </style>
</th:block>
<div layout:fragment="content">
  <div class="title_line">
    📅 일정 등록
  </div>

  <aside class="aside_right">
    <a th:href="@{|./create|}">등록</a>
    <span class="menu_divide">│</span>
    <a href="javascript:location.reload();">새로고침</a>
    <span class="menu_divide">│</span>
    <a th:href="@{|./list_calendar|}">캘린더로 보기</a>
    <span class="menu_divide">│</span>
    <a th:href="@{|./list_all|}">목록형 보기</a>
  </aside>

  <div class="menu_line"></div>

  <form name="frm" method="post" action="/calendar/create" enctype="multipart/form-data">
    
    <!-- 🔥 카테고리 (관리자 + 공급자만 노출) -->
    <div th:if="${isAdmin}">
      <label>카테고리</label>
      <select name="cateno" class="form-control" required>
        <option value="">카테고리를 선택하세요</option>
        <optgroup th:each="menu : ${cateList}" th:label="${menu.grp}">
          <option th:each="cate : ${menu.list_name}"
                  th:value="${cate.cateno}"
                  th:text="${cate.name}"
                  th:selected="${cate.cateno == calendarVO.cateno}"></option>
        </optgroup>
      </select>
    </div>

    <!-- 🔥 소비자는 숨김 처리 -->
    <div th:unless="${isAdmin}">
      <input type="hidden" name="cateno" value="0">
    </div>
    
    <!-- ✅ 이미지 -->
    <div>
      <label>이미지</label>
      <input type="file" name="file1MF" accept="image/*" class="form-control" style="width: 50%;">
    </div>

    <!-- ✅ 출력 날짜 -->
    <div>
      <label>출력 날짜 (labeldate)</label>
      <input type="date" name="labeldate" required class="form-control" style="width: 48%;">
    </div>

    <!-- ✅ 기간 -->
    <div>
      <label>기간 (startdate ~ enddate)</label>
      <div class="form-inline">
        <input type="date" name="startdate" required class="form-control" style="width: 48%;">
        ~
        <input type="date" name="enddate" required class="form-control" style="width: 48%;">
      </div>
    </div>

    <!-- ✅ 캘린더 출력 레이블 -->
    <div>
      <label>캘린더에 출력될 레이블</label>
      <input type="text" name="label" placeholder="예) 야시장 행사" required class="form-control" style="width: 100%;">
    </div>

    <!-- ✅ 제목 -->
    <div>
      <label>제목</label>
      <input type="text" name="title" placeholder="제목을 입력하세요." required class="form-control" style="width: 100%;">
    </div>

    <!-- ✅ 내용 -->
    <div>
      <label>내용</label>
      <textarea name="content" rows="8" placeholder="일정의 상세 내용을 입력하세요." required class="form-control" style="width: 100%;"></textarea>
    </div>

    <!-- ✅ 버튼 -->
    <div class="content_body_bottom">
      <button type="submit" class="btn btn-primary btn-sm">등록</button>
      <button type="button" onclick="location.href='./list_calendar'" class="btn btn-secondary btn-sm">캘린더</button>
      <button type="button" onclick="location.href='./list_all'" class="btn btn-secondary btn-sm">목록</button>
    </div>
  </form>
</div>

</html>
