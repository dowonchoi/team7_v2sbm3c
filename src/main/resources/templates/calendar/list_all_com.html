<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="list_all_fragment">

<link rel="stylesheet" href="/css/calendar.css">

<!-- âœ… ì¹´í…Œê³ ë¦¬ í•„í„° + ë³´ê¸° ì „í™˜ -->
<div id="filter_bar">
  <select id="cateFilter" onchange="filterByCate()">
    <option value="all">ì „ì²´</option>
    <option th:each="cate : ${cateList}" 
            th:value="${cate.cateno}" 
            th:text="${cate.name}">ì¹´í…Œê³ ë¦¬</option>
  </select>

  <!-- <div id="viewToggle">
    <button onclick="changeView('grid')">ğŸ›ï¸ ì‡¼í•‘ëª°í˜•</button>
  </div> -->
</div>

<!-- âœ… ì¼ì • ëª©ë¡ ì¹´ë“œ -->
<div id="calendarContainer" class="grid_view">

  <div class="card" th:each="calendar : ${list}" 
       th:data-cate="${calendar.cateno}">
    <div class="img_box">
      <img th:if="${calendar.file1saved != null and calendar.file1saved != ''}"
           th:src="@{|/calendar/storage/${calendar.file1saved}|}"
           alt="ì¸ë„¤ì¼">
      <img th:if="${calendar.file1saved == null or calendar.file1saved == ''}"
           src="/calendar/images/noimage.png" 
           alt="No Image">
    </div>
    <div class="info">
      <div class="label" th:text="${calendar.label}">ì¼ì • ì œëª©</div>
      <div class="date" th:text="${calendar.labeldate}">2025-07-01</div>
      <div class="cnt">ì¡°íšŒìˆ˜: <span th:text="${calendar.cnt}">0</span></div>
      <div class="btns">
        <a th:href="@{|/calendar/read/${calendar.calendarno}|}">ìƒì„¸</a>
        <a th:href="@{|/calendar/update/${calendar.calendarno}|}">ìˆ˜ì •</a>
        <a th:href="@{|/calendar/delete/${calendar.calendarno}|}"
           onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">ì‚­ì œ</a>
      </div>
    </div>
  </div>

</div>

<!-- âœ… ìŠ¤í¬ë¦½íŠ¸ -->
<script>
function changeView(view) {
  const container = document.getElementById('calendarContainer');
  container.className = view + '_view';
}

function filterByCate() {
  const selected = document.getElementById('cateFilter').value;
  const cards = document.querySelectorAll('#calendarContainer .card');
  cards.forEach(card => {
    const cate = card.getAttribute('data-cate');
    if (selected === 'all' || selected === cate) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}
</script>

</div>
</html>
