<!DOCTYPE html>
<html layout:decorate="~{layout}">
<th:block layout:fragment="head">
  <style>
    /* âœ… ì €ì¥ ë²„íŠ¼: ì—°í•œ ë…¹ìƒ‰ */
    .content_body_bottom .btn-save {
      background-color: #6db75b !important;
      color: #fff !important;
      border: none !important;
      padding: 8px 16px !important;
      font-size: 14px !important;
      border-radius: 6px !important;
      transition: all 0.2s ease-in-out;
    }
    .content_body_bottom .btn-save:hover {
      background-color: #20b564 !important;
      transform: scale(1.05) !important;
    }

    /* âœ… ì·¨ì†Œ ë²„íŠ¼: ì—°í•œ íšŒìƒ‰ */
    .content_body_bottom .btn-cancel {
      background-color: #e0e0e0 !important;
      color: #333 !important;
      border: none !important;
      padding: 8px 16px !important;
      font-size: 14px !important;
      border-radius: 6px !important;
      transition: all 0.2s ease-in-out;
    }
    .content_body_bottom .btn-cancel:hover {
      background-color: #cfcfcf !important;
      transform: scale(1.05) !important;
    }
  </style>
</th:block>
<div layout:fragment="content">

  <div class="title_line">ğŸ“… ì¼ì • ìˆ˜ì •</div>

  <aside class="aside_right">
    <a href="javascript:location.reload();">ìƒˆë¡œê³ ì¹¨</a>
    <span class="menu_divide">â”‚</span>
    <a th:href="@{/calendar/list_all}">ëª©ë¡</a>
    <span class="menu_divide">â”‚</span>
    <a th:href="@{/calendar/create}">ë“±ë¡</a>
  </aside>

  <div class="menu_line"></div>

  <form method="post" th:action="@{/calendar/update}" enctype="multipart/form-data">
    <input type="hidden" name="calendarno" th:value="${calendarVO.calendarno}">

    <!-- ì¶œë ¥ ë‚ ì§œ -->
    <div>
      <label>ì¶œë ¥í•  ë‚ ì§œ</label>
      <input type="date" name="labeldate"
             th:value="${#strings.substring(calendarVO.labeldate, 0, 10)}"
             required class="form-control">
    </div>

    <!-- ë ˆì´ë¸” -->
    <div>
      <label>ë‹¬ë ¥ì— ì¶œë ¥ë  ë ˆì´ë¸”</label>
      <input type="text" name="label" th:value="${calendarVO.label}"
             required class="form-control">
    </div>

    <!-- ì œëª© -->
    <div>
      <label>ì œëª©</label>
      <input type="text" name="title" th:value="${calendarVO.title}"
             required class="form-control">
    </div>

    <!-- ê¸€ ë‚´ìš© -->
    <div>
      <label>ê¸€ ë‚´ìš©</label>
      <textarea name="content" required class="form-control" rows="10"
                th:text="${calendarVO.content}"></textarea>
    </div>

    <!-- ê¸°ê°„ -->
    <div>
      <label>ê¸°ê°„</label>
      <div style="display: flex; gap: 8px;">
        <input type="date" name="startdate"
               th:value="${#strings.substring(calendarVO.startdate, 0, 10)}"
               required class="form-control">
        <span>~</span>
        <input type="date" name="enddate"
               th:value="${#strings.substring(calendarVO.enddate, 0, 10)}"
               required class="form-control">
      </div>
    </div>

    <!-- ì¹´í…Œê³ ë¦¬ (ê´€ë¦¬ì ë° ê³µê¸‰ìë§Œ) -->
    <div th:if="${isAdmin}"> <!-- ê´€ë¦¬ì -->
      <label>ì¹´í…Œê³ ë¦¬</label>
      <select name="cateno" class="form-control">
        <option value="">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
        <optgroup th:each="menu : ${cateList}" th:label="${menu.grp}">
          <option th:each="cate : ${menu.list_name}"
                  th:value="${cate.cateno}"
                  th:text="${cate.name}"
                  th:selected="${cate.cateno == calendarVO.cateno}">
          </option>
        </optgroup>
      </select>
    </div>

    <div th:unless="${isAdmin}">
      <input type="hidden" name="cateno" th:value="${calendarVO.cateno}">
    </div>

    <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
    <div>
      <label>ì´ë¯¸ì§€</label>
      <input type="file" name="file1MF" class="form-control">
      <div th:if="${calendarVO.file1saved != null and calendarVO.file1saved != ''}">
        <img th:src="@{|/calendar/storage/${calendarVO.file1saved}|}"
             style="max-width: 300px; border: 1px solid #ccc; border-radius: 8px;">
        <div style="font-size: 13px; color: gray;" 
             th:text="'í˜„ì¬ íŒŒì¼: ' + ${calendarVO.file1origin}"></div>
      </div>
      <div th:unless="${calendarVO.file1saved != null and calendarVO.file1saved != ''}">
        <div style="font-size: 13px; color: gray;">ë“±ë¡ëœ ì´ë¯¸ì§€ ì—†ìŒ</div>
      </div>
    </div>

    <!-- ê³µê°œ ì—¬ë¶€ -->
    <div th:if="${isAdmin}">
      <label>ê³µê°œ ì—¬ë¶€</label>
      <select name="visible" class="form-control" style="width: 30%;">
        <option value="Y" th:selected="${calendarVO.visible == 'Y'}">ê³µê°œ</option>
        <option value="N" th:selected="${calendarVO.visible == 'N'}">ë¹„ê³µê°œ</option>
      </select>
    </div>
    <div th:unless="${isAdmin}">
      <input type="hidden" name="visible" th:value="${calendarVO.visible}">
    </div>

    <!-- ë²„íŠ¼ -->
    <div class="content_body_bottom" style="margin-top: 20px;">
      <!-- ì €ì¥ ë²„íŠ¼ -->
      <button type="submit" class="btn btn-save">ì €ì¥</button>
      
      <!-- ì·¨ì†Œ ë²„íŠ¼ -->
      <button type="button" class="btn btn-cancel"
              th:attr="onclick=|location.href='/calendar/list_all'|">ì·¨ì†Œ(ëª©ë¡)</button>
    </div>


  </form>

</div>
</html>
